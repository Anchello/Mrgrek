!function(t,s){var a=function(){this.body=t("body"),this.overlay=t(".modal-overlay"),this.substrate=t(".modal-overlay__substrate"),this.modals=t(".modal"),this.buttons=t(".modal-button"),this.closes=t(".modal__close"),this.defaults={body_cls:"page--overlay",modal_cls:"modal--show",overlay_cls:"modal-overlay--show"}};a.prototype={init:function(){var a=this,o=this.defaults;t(document);this.modals&&this.modals.length>0&&(s.on("load",function(){a.render.call(a)}),s.on("resize",function(){a.resizeModals.call(a)}),this.buttons.on("click",function(s){return a.eventShowModal.call(a,t(this)),s.preventDefault(),!1}),this.closes.on("click",function(s){return a.eventCloseModal.call(a,t(this)),s.preventDefault(),!1}),this.substrate.on("click",function(s){return a.modalClose.call(a,t("."+o.modal_cls)),s.preventDefault(),!1}))},render:function(){this.overlay.css("opacity",0),this.resizeModals()},resizeModals:function(){var a=this,o=this.defaults,e=s.width();this.modals.each(function(s,l){l=t(l),l.hasClass(o.modal_cls)||a.setTranslateX(l,-e)})},setTranslateX:function(t,s){t.css({"-webkit-transform":"matrix(1, 0, 0, 1, "+s+", 0)","-moz-transform":"matrix(1, 0, 0, 1, "+s+", 0)","-ms-transform":"matrix(1, 0, 0, 1, "+s+", 0)","-o-transform":"matrix(1, 0, 0, 1, "+s+", 0)",transform:"matrix(1, 0, 0, 1, "+s+", 0)"})},setTranslateY:function(t,s,a){t.css({"-webkit-transform":"matrix(1, 0, 0, 1, "+s+", "+a+")","-moz-transform":"matrix(1, 0, 0, 1, "+s+", "+a+")","-ms-transform":"matrix(1, 0, 0, 1, "+s+", "+a+")","-o-transform":"matrix(1, 0, 0, 1, "+s+", "+a+")",transform:"matrix(1, 0, 0, 1, "+s+", "+a+")"})},animateTranslateX:function(s,a,o){var e=this;t({offset:a}).stop().animate({offset:o},{duration:650,step:function(t){e.setTranslateX(s,t)}})},animateTranslateY:function(s,a,o,e){var l=this;t({offset:a}).stop().animate({offset:e},{duration:650,step:function(t){l.setTranslateY(s,o,t)}})},modalClose:function(t,a){var o=this,e=s.width(),l=this.defaults;t.length>0&&t.hasClass(l.modal_cls)&&(a||this.overlay.animate({opacity:0},650),this.animateTranslateX(t,0,2*e),setTimeout(function(){a||(o.body.removeClass(l.body_cls),o.overlay.removeClass(l.overlay_cls)),t.removeClass(l.modal_cls),setTimeout(function(){o.setTranslateX(t,-e)},10)},650))},modalCloseDown:function(t){var a=this,o=s.height(),e=this.defaults;t.length>0&&t.hasClass(e.modal_cls)&&(this.animateTranslateY(t,0,0,o),setTimeout(function(){a.body.removeClass(e.body_cls),a.overlay.removeClass(e.overlay_cls),t.removeClass(e.modal_cls),setTimeout(function(){a.setTranslateY(t,-o,0)},10)},650))},eventShowModal:function(a){var o=s.width(),e=this.defaults,l=a.data("modal"),n=t(".modal--"+l),i=t("."+e.modal_cls);n.length>0&&!n.hasClass(e.modal_cls)&&(i.length>0&&this.modalClose(i,!0),this.body.addClass(e.body_cls),this.overlay.addClass(e.overlay_cls),n.addClass(e.modal_cls),this.overlay.animate({opacity:1},650),this.animateTranslateX(n,-o,0))},eventCloseModal:function(t){var s=this.defaults,a=t.parent();a.length>0&&a.hasClass(s.modal_cls)&&this.modalClose(a)}},t.modal=function(){return(new a).init()}}(jQuery,jQuery(window));